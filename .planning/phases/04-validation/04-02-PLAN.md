---
phase: 04-validation
plan: 02
type: execute
wave: 2
depends_on:
  - "04-01"
files_modified:
  - .planning/REQUIREMENTS.md
autonomous: true
requirements:
  - SPEC-03
  - SPEC-04

must_haves:
  truths:
    - "skills-ref validate passes for every skill with zero errors and zero warnings"
    - "Every SKILL.md body is under 500 lines"
    - "No SKILL.md contains real private keys, real pubkeys, or real relay URLs in examples"
    - "SPEC-03 and SPEC-04 are marked complete in REQUIREMENTS.md"
  artifacts:
    - path: ".planning/REQUIREMENTS.md"
      provides: "Updated traceability with SPEC-03 and SPEC-04 marked complete"
      contains: "SPEC-03"
  key_links:
    - from: "skills-ref validate"
      to: "All six skill directories"
      via: "Per-skill validation command"
      pattern: "Valid skill"
---

<objective>
Run comprehensive validation across all skills to confirm spec compliance, then mark SPEC-03 and SPEC-04 complete in requirements tracking.

Purpose: This is the final quality gate for v1 skills. Confirms that all remediation from Plan 01 is correct and that no regressions exist. Updates project tracking to reflect completion.

Output: Validated skill suite and updated REQUIREMENTS.md with SPEC-03/SPEC-04 marked complete.
</objective>

<execution_context>
@/home/sandwich/.claude/get-shit-done/workflows/execute-plan.md
@/home/sandwich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-validation/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run full validation suite across all skills</name>
  <files>
    .agents/skills/nsyte-setup/SKILL.md
    .agents/skills/nsyte-deploy/SKILL.md
    .agents/skills/nsyte-config/SKILL.md
    .agents/skills/nsyte-auth/SKILL.md
    .agents/skills/nsyte-ci/SKILL.md
    .agents/skills/nsyte-concepts/SKILL.md
  </files>
  <action>
Run three validation checks and fail fast if any issue is found:

**Check 1 — skills-ref validate (spec compliance):**
Run `/tmp/skills-ref-venv/bin/skills-ref validate .agents/skills/SKILL_DIR/` for each of the six skills. All must report "Valid skill". If any fails, diagnose and fix the issue before proceeding.

**Check 2 — Line count (SPEC-03 token budget):**
Run `wc -l .agents/skills/*/SKILL.md`. Every file must be under 500 lines. If any exceeds, identify sections to trim and reduce below 500 lines.

**Check 3 — No real credentials in examples (security):**
Run `grep -rn` across all SKILL.md files for patterns:
- Real relay URLs: `wss://relay.damus.io`, `wss://relay.nsec.app`, `wss://nos.lol` (must not appear in SKILL.md files)
- Real nsec keys: any `nsec1` followed by 58+ alphanumeric chars (must not appear)
- Real npub keys: any `npub1` followed by 58+ alphanumeric chars (must not appear)
- Real hex pubkeys: any standalone 64-char hex string that is not clearly a placeholder

Placeholder patterns that ARE acceptable: `nsec1...`, `npub1abc...`, `pubkey` (literal word), `a1b2c3d4e5f6...`, `wss://relay.example.com`

**Check 4 — Description quality (SPEC-04):**
For each SKILL.md, extract the `description:` field and verify:
- Starts with a third-person verb (e.g., "Deploys", "Installs", "Configures", "Sets up", "Manages", "Background")
- Contains at least one action word: deploy, publish, host, install, configure, automate, manage, set up
- Contains at least one context word: Nostr, decentralized, static site, Blossom, NIP-46

If any check fails, fix the issue in the relevant SKILL.md file before marking this task done.
  </action>
  <verify>
    <automated>PASS=true; for d in .agents/skills/nsyte-setup .agents/skills/nsyte-deploy .agents/skills/nsyte-config .agents/skills/nsyte-auth .agents/skills/nsyte-ci .agents/skills/nsyte-concepts; do /tmp/skills-ref-venv/bin/skills-ref validate "$d" 2>&1 | grep -q "Valid skill" || { echo "FAIL validate: $d"; PASS=false; }; done; for f in .agents/skills/*/SKILL.md; do desc=$(grep "^description:" "$f"); echo "$desc" | grep -qiE "(deploy|publish|host|install|configure|automate|manage|set up|provides)" || { echo "FAIL action vocab: $f"; PASS=false; }; echo "$desc" | grep -qiE "(nostr|decentralized|static site|blossom|NIP-46)" || { echo "FAIL context vocab: $f"; PASS=false; }; done; $PASS && echo "ALL PASS"</automated>
  </verify>
  <done>All six skills pass skills-ref validate. All are under 500 lines. No real credentials in examples. All descriptions have action + context vocabulary.</done>
</task>

<task type="auto">
  <name>Task 2: Mark SPEC-03 and SPEC-04 complete in REQUIREMENTS.md</name>
  <files>.planning/REQUIREMENTS.md</files>
  <action>
In `.planning/REQUIREMENTS.md`, update:
- `- [ ] **SPEC-03**:` → `- [x] **SPEC-03**:`
- `- [ ] **SPEC-04**:` → `- [x] **SPEC-04**:`

In the Traceability table, update:
- `| SPEC-03 | Phase 4 | Pending |` → `| SPEC-03 | Phase 4 | Complete |`
- `| SPEC-04 | Phase 4 | Pending |` → `| SPEC-04 | Phase 4 | Complete |`

Do not change any other content.
  </action>
  <verify>
    <automated>grep -c "\[x\] \*\*SPEC-0[34]\*\*" .planning/REQUIREMENTS.md | grep -q "2" && echo "PASS" || echo "FAIL"</automated>
  </verify>
  <done>SPEC-03 and SPEC-04 are marked complete in both the requirements list and the traceability table.</done>
</task>

</tasks>

<verification>
1. `skills-ref validate` passes for all six skills — zero errors, zero warnings
2. `wc -l .agents/skills/*/SKILL.md` — all under 500 lines
3. No real relay URLs, private keys, or pubkeys in any SKILL.md file
4. SPEC-03 and SPEC-04 marked `[x]` in REQUIREMENTS.md
</verification>

<success_criteria>
- Full validation suite passes with no issues
- REQUIREMENTS.md updated with SPEC-03 and SPEC-04 marked complete
- All v1 spec compliance requirements are satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/04-validation/04-02-SUMMARY.md`
</output>
